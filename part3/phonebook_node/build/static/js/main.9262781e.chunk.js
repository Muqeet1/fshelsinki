(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(17),o=t.n(r),u=t(8),a=t(3),s=t(0),i=function(e){var n=e.value,t=e.searchChange;return Object(s.jsx)("div",{children:Object(s.jsxs)("p",{children:["Filter shown with:",Object(s.jsx)("input",{value:n,onChange:t,placeholder:"Enter name"})]})})},l=function(e){return Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:e.name,onChange:e.nameChange})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:e.number,onChange:e.numberChange})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",onClick:e.handleAdd,children:"Add"})})]})},d=function(e){var n=e.person,t=e.removePerson;return n.map((function(e){return Object(s.jsxs)("li",{children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.name)}))},f=t(4),j=t.n(f),b="/api/persons",h={getAll:function(){return j.a.get(b).then((function(e){return e.data}))},create:function(e){return j.a.post(b,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},del:function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))}},m=function(e){var n=e.notification;return null===n?null:Object(s.jsx)("div",{className:n.type,children:n.message})},p=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),f=Object(a.a)(o,2),j=f[0],b=f[1],p=Object(c.useState)(""),O=Object(a.a)(p,2),v=O[0],x=O[1],g=Object(c.useState)(""),C=Object(a.a)(g,2),w=C[0],y=C[1],k=Object(c.useState)(null),S=Object(a.a)(k,2),A=S[0],L=S[1];Object(c.useEffect)((function(){h.getAll().then((function(e){r(e)}))}),[]);var I={name:j,number:v},P=function(){b(""),x("")},U=function(e,n){L({message:e,type:n}),setTimeout((function(){L(null)}),5e3)},q=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(i,{value:w,searchChange:function(e){return y(e.target.value)}}),Object(s.jsx)(m,{notification:A}),Object(s.jsx)(l,{name:j,number:v,nameChange:function(e){return b(e.target.value)},numberChange:function(e){return x(e.target.value)},handleAdd:function(e){e.preventDefault();var n=t.map((function(e){return e.name.toLowerCase()})),c=t.find((function(e){return e.name.toLowerCase()===j.toLowerCase()}));if(""===j||""===v)alert("Input fields cannot be empty!");else if(n.includes(j.toLowerCase())){if(c){if(window.confirm("".concat(c.name," is already added to phonebook! Do you want to update the PhoneNumber?"))){var o=Object(u.a)(Object(u.a)({},c),{},{number:v});h.update(c.id,o).then((function(e){console.log("Successfully Updated"),U("Information of ".concat(c.name," is successfully updated to the server!"),"success"),r(t.map((function(n){return n.id!==c.id?n:e}))),P()})).catch((function(e){U(e.response.data.error,"error"),console.error("Request Unsuccessful")}))}}}else h.create(I).then((function(e){console.log("Successfully Created!"),U("Information of ".concat(j," is successfully added to the server!"),"success"),r(t.concat(I)),P()})).catch((function(e){U(e.response.data.error,"error"),console.error("Request Unsuccessful")}))}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("div",{children:Object(s.jsx)(d,{person:q,removePerson:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&h.del(e.id).then((function(n){console.log("Successfully Deleted!"),U("Information of ".concat(e.name," is successfully deleted from the server!"),"success"),r(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){U(n.response.data.error,"error"),console.error("Request Unsuccessful"),r(t.filter((function(n){return n.id!==e.id})))}))}})})]})};t(41);o.a.render(Object(s.jsx)(p,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.9262781e.chunk.js.map